---
title: Configuration Reference
description: Complete reference for UDL configuration options
navigation:
  icon: i-lucide-settings
---

## Configuration File

UDL looks for configuration files in this order:

1. `udl.config.ts` (recommended)
2. `udl.config.js`
3. `udl.config.mjs`
4. `udl.config.cjs`

## defineConfig Helper

Use `defineConfig` for TypeScript support and autocomplete:

```typescript [udl.config.ts]
import { defineConfig } from 'universal-data-layer';

export const { config } = defineConfig({
  config: {
    // Your configuration
  },
});
```

## UDLConfig Interface

The main configuration object:

```typescript
interface UDLConfig {
  // Plugin metadata (for plugin configs)
  type?: 'source' | 'core' | 'other';
  name?: string;
  version?: string;

  // Server configuration
  port?: number;
  host?: string;
  endpoint?: string;
  staticPath?: string;

  // Plugins
  plugins?: PluginSpec[];
  indexes?: string[];

  // Code generation
  codegen?: CodegenConfig;

  // Caching
  cache?: CacheStorage | false;
}
```

### Server Options

| Option | Type | Default | Description |
| ------ | ---- | ------- | ----------- |
| `port` | `number` | `4000` | Server port |
| `host` | `string` | `'localhost'` | Server host |
| `endpoint` | `string` | `'/graphql'` | GraphQL endpoint path |
| `staticPath` | `string` | `'/static/'` | Static files path |

```typescript [udl.config.ts]
import { defineConfig } from 'universal-data-layer';

export const { config } = defineConfig({
  config: {
    port: 3001,
    host: '0.0.0.0',
    endpoint: '/api/graphql',
  },
});
```

### Plugin Metadata

For plugin configurations:

| Option | Type | Description |
| ------ | ---- | ----------- |
| `type` | `'source' \| 'core' \| 'other'` | Plugin type |
| `name` | `string` | Plugin name |
| `version` | `string` | Plugin version |
| `indexes` | `string[]` | Default indexed fields |

## Plugin Configuration

### PluginSpec

Plugins can be specified as strings or objects:

```typescript
type PluginSpec = string | {
  name: string;
  options?: Record<string, unknown> & {
    indexes?: string[];
  };
};
```

### Registration Methods

```typescript [udl.config.ts]
import { defineConfig } from 'universal-data-layer';

export const { config } = defineConfig({
  config: {
    plugins: [
      // String shorthand (no options)
      'my-simple-plugin',

      // Object with options
      {
        name: '@udl/plugin-source-contentful',
        options: {
          spaceId: process.env['CONTENTFUL_SPACE_ID'],
          accessToken: process.env['CONTENTFUL_ACCESS_TOKEN'],
          environment: 'master',
          indexes: ['slug'],
        },
      },

      // Local plugin path
      './plugins/my-local-plugin',
    ],
  },
});
```

### Plugin Options

Each plugin defines its own options. Common patterns:

```typescript
{
  name: '@udl/plugin-source-contentful',
  options: {
    // Plugin-specific options
    spaceId: 'xxx',
    accessToken: 'yyy',

    // UDL-recognized option: fields to index for O(1) lookups
    indexes: ['slug', 'contentfulId'],
  },
}
```

## Codegen Configuration

### CodegenConfig Interface

```typescript
interface CodegenConfig {
  output?: string;
  guards?: boolean;
  includeJsDoc?: boolean;
  includeInternal?: boolean;
  types?: string[];
  extensions?: (CodegenExtension | string)[];
}
```

### Options

| Option | Type | Default | Description |
| ------ | ---- | ------- | ----------- |
| `output` | `string` | `'./generated'` | Output directory |
| `guards` | `boolean` | `false` | Generate type guard functions |
| `includeJsDoc` | `boolean` | `true` | Include JSDoc comments |
| `includeInternal` | `boolean` | `true` | Include `internal` metadata field |
| `types` | `string[]` | all types | Specific types to generate |
| `extensions` | `string[]` | `[]` | Codegen extensions to run |

### Example

```typescript [udl.config.ts]
import { defineConfig } from 'universal-data-layer';

export const { config } = defineConfig({
  config: {
    plugins: ['@udl/plugin-source-contentful'],
    codegen: {
      output: './generated',
      guards: true,
      includeJsDoc: true,
      includeInternal: true,
      extensions: ['@udl/codegen-typed-queries'],
    },
  },
});
```

## Cache Configuration

Control node caching behavior:

| Value | Behavior |
| ----- | -------- |
| `undefined` (default) | File-based cache in `.udl-cache/nodes.json` |
| `false` | Disable caching entirely |
| `CacheStorage` | Custom cache implementation |

```typescript [udl.config.ts]
import { defineConfig } from 'universal-data-layer';

export const { config } = defineConfig({
  config: {
    // Disable caching
    cache: false,
  },
});
```

## Environment Variables

Common pattern for sensitive data:

```bash [.env]
CONTENTFUL_SPACE_ID=your_space_id
CONTENTFUL_ACCESS_TOKEN=your_token
CONTENTFUL_ENVIRONMENT=master
```

```typescript [udl.config.ts]
import { defineConfig } from 'universal-data-layer';

export const { config } = defineConfig({
  config: {
    port: parseInt(process.env['PORT'] || '4000', 10),
    plugins: [
      {
        name: '@udl/plugin-source-contentful',
        options: {
          spaceId: process.env['CONTENTFUL_SPACE_ID'],
          accessToken: process.env['CONTENTFUL_ACCESS_TOKEN'],
          environment: process.env['CONTENTFUL_ENVIRONMENT'] || 'master',
        },
      },
    ],
  },
});
```

## Complete Example

```typescript [udl.config.ts]
import { defineConfig } from 'universal-data-layer';

const isDev = process.env['NODE_ENV'] === 'development';

export const { config } = defineConfig({
  config: {
    // Server
    port: isDev ? 4000 : 3000,
    host: isDev ? 'localhost' : '0.0.0.0',

    // Plugins
    plugins: [
      {
        name: '@udl/plugin-source-contentful',
        options: {
          spaceId: process.env['CONTENTFUL_SPACE_ID'],
          accessToken: isDev
            ? process.env['CONTENTFUL_PREVIEW_TOKEN']
            : process.env['CONTENTFUL_ACCESS_TOKEN'],
          host: isDev ? 'preview.contentful.com' : 'cdn.contentful.com',
          environment: process.env['CONTENTFUL_ENVIRONMENT'] || 'master',
          indexes: ['slug', 'contentfulId'],
        },
      },
      // Dev-only plugin
      ...(isDev ? ['./plugins/dev-logger'] : []),
    ],

    // Code generation
    codegen: {
      output: './generated',
      guards: true,
      extensions: ['@udl/codegen-typed-queries'],
    },
  },
});
```

## Next Steps

- [Plugin Overview](/using-plugins/overview) - How to use plugins
- [Creating Plugins](/advanced/creating-plugins) - Build custom plugins
